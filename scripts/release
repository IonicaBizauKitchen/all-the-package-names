#!/usr/bin/env bash

if [ ! -d "all-the-package-names" ]
then
  git clone https://github.com/zeke/all-the-package-names
  git config user.email "zeke@sikelianos.com"
  git config user.name "Zeke Sikelianos"
fi

cd all-the-package-names
npm run download
npm run extract
status=$(git status names.json 2>&1)

if [[ "$status" =~ "modified:" ]]
then
  count=$(cat names.json | wc -l)
  echo "$count package names!"
  git add names.json
  git commit -m "$count package names"
  npm version minor -m "$count package names"
  npm publish
  git push origin master --follow-tags
else
  echo "no new names"
fi
